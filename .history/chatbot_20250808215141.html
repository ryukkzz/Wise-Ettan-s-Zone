<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wise Ettan Chatbot</title>
<link rel="stylesheet" href="chatbotd.css">
</head>
<body>

<div class="chat-container">
    <h1>ðŸ’¬ Chat with Wise Ettan</h1>
    <div id="messages" class="messages"></div>
    <div class="input-container">
        <input type="text" id="user-input" placeholder="Type your message...">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
    async function sendMessage() {
        const userInput = document.getElementById("userInput").value.trim();
        if (!userInput) return;

        // Display user's message
        const chatBox = document.getElementById("chatBox");
        const userMessageDiv = document.createElement("div");
        userMessageDiv.className = "user-message";
        userMessageDiv.textContent = "You: " + userInput;
        chatBox.appendChild(userMessageDiv);

        // Clear input field
        document.getElementById("userInput").value = "";

        try {
            // Send message to backend
            const response = await fetch("/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: userInput })
            });

            const data = await response.json();

            // Display Wise Ettan's reply
            const botMessageDiv = document.createElement("div");
            botMessageDiv.className = "bot-message";
            botMessageDiv.textContent = "Wise Ettan: " + data.reply;
            chatBox.appendChild(botMessageDiv);

            // Scroll to latest message
            chatBox.scrollTop = chatBox.scrollHeight;
        } catch (error) {
            console.error("Error:", error);
            const errorDiv = document.createElement("div");
            errorDiv.className = "error-message";
            errorDiv.textContent = "Error connecting to server.";
            chatBox.appendChild(errorDiv);
        }
    }

    // Allow Enter key to send message
    document.getElementById("userInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            sendMessage();
        }
    });
</script>


</body>
</html>
